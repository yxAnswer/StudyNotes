## Go语言fmt包详解

**格式化输出函数**

```go
func Print(a ...interface{}) (n int, err error)
```

Print采用默认格式将其参数格式化并写入标准输出。如果两个相邻的参数都不是字符串，会在它们的输出之间添加空格，返回写入的字节数和遇到的任何错误。

```go
func Printf(format string, a ...interface{}) (n int, err error)
```

Printf根据format参数生成格式化的字符串并写入标准输出，返回写入的字节数和遇到的任何错误。

```go
func Println(a ...interface{}) (n int, err error)
```

Println采用默认格式将其参数格式化并写入标准输出。总是会在相邻参数的输出之间添加空格并在输出结束后添加换行符，返回写入的字节数和遇到的任何错误。

**常用的格式化**

Go语言的标准输出流在打印到屏幕时有些参数跟别的语言（比如C#和Java）不同，下面是我整理的一些常用的格式化操作。

普通占位符

| 占位符 | 说明                               | 举例                    |
| ------ | ---------------------------------- | ----------------------- |
| %v     | 以默认的方式打印变量的值           | fmt.Printf("%v", site)  |
| %+v    | 在打印结构体时，会添加字段名       | fmt.Printf("%+v", site) |
| %#v    | 在打印结构体时，会添加字段名和包名 | fmt.Printf("%#v", site) |
| %T     | 打印变量的类型                     | fmt.Printf("%T", site)  |
| %%     | 字面上的百分号，并非值的占位符     | fmt.Printf("%%")        |

布尔占位符

| 占位符 | 说明            | 举例                   |
| ------ | --------------- | ---------------------- |
| %t     | 打印true或false | fmt.Printf("%t", true) |

整数占位符

| 占位符 | 说明                                                         | 举例                     |
| ------ | ------------------------------------------------------------ | ------------------------ |
| %b     | 表示为二进制                                                 | fmt.Printf("%b", 100)    |
| %c     | 该值对应的unicode码值                                        | fmt.Printf("%c", 0x4E2D) |
| %d     | 表示为十进制                                                 | fmt.Printf("%d", 0x12)   |
| %o     | 表示为八进制                                                 | fmt.Printf("%d", 10)     |
| %q     | 该值对应的单引号括起来的go语法字符字面值，必要时会采用安全的转义表示 | fmt.Printf("%q", 0x4E2D) |
| %x     | 十六进制表示，字母形式为小写 a-f                             | fmt.Printf("%x", 13)     |
| %X     | 十六进制表示，字母形式为大写 A-F                             | fmt.Printf("%x", 13)     |
| %U     | 表示为Unicode格式：U+1234，等价于"U+%04X"                    | fmt.Printf("%U", 0x4E2D) |

浮点数和复数的组成部分（实部和虚部）

| 占位符 | 说明                                                  | 举例                       |
| ------ | ----------------------------------------------------- | -------------------------- |
| %e     | (=%.6e) 6位小数点 科学计数法，例如 -1234.456e+78      | fmt.Printf("%e", 10.2)     |
| %E     | 科学计数法，例如 -1234.456E+78                        | fmt.Printf("%e", 10.2)     |
| %f     | (=%.6f) 6位小数点 有小数点而无指数，例如 123.456      | fmt.Printf("%f", 10.2)     |
| %g     | 根据情况选择 %e 或 %f 以产生更紧凑的（无末尾的0）输出 | fmt.Printf("%g", 10.20)    |
| %G     | 根据情况选择 %E 或 %f 以产生更紧凑的（无末尾的0）输出 | fmt.Printf("%G", 10.20+2i) |

字符串与字节切片

| 占位符  | 说明                                           | 举例                               |
| ------- | ---------------------------------------------- | ---------------------------------- |
| %s      | 输出字符串表示（string类型或[]byte)            | fmt.Printf("%s", []byte("oldboy")) |
| %10s    | 输出字符串最小宽度为10(右对齐)                 | fmt.Printf("%10s", "oldboy")       |
| %-10s   | 输出字符串最小宽度为10(左对齐)                 | fmt.Printf("%-10s", "oldboy")      |
| %.5s    | 输出字符串最大宽度为5                          | fmt.Printf("%.5s", "oldboy")       |
| %5.10s  | 输出字符串最小宽度为5，最大宽度为10            | fmt.Printf("%5.10s", "oldboy")     |
| %-5.10s | 输出字符串最小宽度为5，最大宽度为10(左对齐)    | fmt.Printf("%-5.10s", "oldboy")    |
| %5.3s   | 输出字符串宽度为5,如果原字符串宽度大于3,则截断 | fmt.Printf("%5.3s", "oldboy")      |
| %010s   | 如果宽度小于10，就会在字符串前面补零           | fmt.Printf("%010s", "oldboy")      |
| %q      | 双引号围绕的字符串，由Go语法安全地转义         | fmt.Printf("%q", "oldboy")         |
| %x      | 十六进制，小写字母，每字节两个字符             | fmt.Printf("%x", "oldboy")         |
| %X      | 十六进制，大写字母，每字节两个字符             | fmt.Printf("%X", "oldboy")         |

指针

| 占位符 | 说明                  | 举例                     |
| ------ | --------------------- | ------------------------ |
| %p     | 十六进制表示，前缀 0x | fmt.Printf("%p", &site)  |
| %#p    | 不带前缀 0x           | fmt.Printf("%#p", &site) |